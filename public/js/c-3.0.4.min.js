!function(e){"use strict";var t="tio_vf_hover_to_comment",o="tio_vf_comment_toggler",i="Type your comment here...",n=!0,a=null,s={},r=null,l=null,_=null,c=null,u=[],f=null,d=[],m=!1,v="",p=!1,h=-1,g=-1,b="",w="",k=!1,y=!1,C=!1,x='<div class="tio_vf_no_click tio_vf_toolbar_v1"id=tio_vf_b_toolbar><div class=tio_vf_no_click id=tio_vf_b_toolbar_inner_container><div class=tio_vf_no_click id='+o+' title="Enable or disable feedback">\x3c!--[if lte IE 8]><img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_enabled.png><![endif]--\x3e\x3c!--[if gt IE 8]><img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_enabled.svg><![endif]--\x3e \x3c!--[if !IE]> --\x3e<img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_enabled.svg>\x3c!-- <![endif]--\x3e <span class=tio_vf_no_click>Feedback On</span></div><div class=tio_vf_no_click id=tio_vf_view_all_feedback title="View all feedback on this page">\x3c!--[if lte IE 8]><img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_comments_indicator.png><![endif]--\x3e\x3c!--[if gt IE 8]><img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_comments_indicator.svg><![endif]--\x3e \x3c!--[if !IE]> --\x3e<img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_comments_indicator.svg>\x3c!-- <![endif]--\x3e <span class="tio_vf_no_click tio_vf_total_comment_count">0 Comments</span></div><div class=tio_vf_no_click id=tio_vf_current_signed_in_user_container title="Sign into your Timeline.io account"><span class=tio_vf_no_click>Sign In</span> <img class=tio_vf_no_click src="https://secure.gravatar.com/avatar/00000000000000000000000000000000?s=60&d=mp&r=PG"></div><div class=tio_vf_no_click id=tio_vf_b_toolbar_hide_action_container title="Minimize toolbar">\x3c!--[if lte IE 8]><img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_hide_toolbar.png><![endif]--\x3e\x3c!--[if gt IE 8]><img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_hide_toolbar.svg><![endif]--\x3e \x3c!--[if !IE]> --\x3e<img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_hide_toolbar.svg>\x3c!-- <![endif]--\x3e</div><div class=tio_vf_no_click id=tio_vf_b_toolbar_show_action_container title="Expand toolbar">\x3c!--[if lte IE 8]><img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_show_toolbar.png><![endif]--\x3e\x3c!--[if gt IE 8]><img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_show_toolbar.svg><![endif]--\x3e \x3c!--[if !IE]> --\x3e<img class=tio_vf_no_click src=https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_show_toolbar.svg>\x3c!-- <![endif]--\x3e</div></div></div><div class=tio_vf_no_click id=tio_vf_toolbar_all_comments_pane title="View all comments on this page"></div>',E='<div id=tio_vf_signup_modal class=tio_vf_no_click> <div id=tio_vf_signup_modal_content class=tio_vf_no_click> <span id=tio_vf_signup_modal_close_button class=tio_vf_no_click>Ã—</span> <form id=tio_vf_signup_modal_form accept-charset=UTF-8 class=tio_vf_no_click> <h1 id=tio_vf_signup_modal_form_header class=tio_vf_no_click>Create a free Timeline account to<br>save your comment.</h1> <label class=tio_vf_no_click for=tio_vf_signup_email>Work Email</label> <input class=tio_vf_no_click type=email name=user[email] id=tio_vf_signup_email required oninvalid=this.setCustomValidity( please provide your email address.&quot;)&quot; oninput=setCustomValidity( &quot;)&quot;> <label class=tio_vf_no_click for=tio_vf_signup_name>Name</label> <input class=tio_vf_no_click type=text name=user[name] id=tio_vf_signup_name required oninvalid=this.setCustomValidity( please provide your full name.&quot;)&quot; oninput=setCustomValidity( &quot;)&quot;> <label class=tio_vf_no_click for=tio_vf_signup_password>Password</label> <input class=tio_vf_no_click type=password name=user[password] id=tio_vf_signup_password required oninvalid=this.setCustomValidity( please provide your pasword.&quot;)&quot; oninput=setCustomValidity( &quot;)&quot; autocomplete=new-password> <input id=tio_vf_signup_modal_form_submit_button class=tio_vf_no_click type=submit name=commit value="Sign Up" class="btn ot-btn ot-blue tio_vf_no_click" data-disable-with="Sign Up"> <div id=tio_vf_signup_modal_signup_disclaimer_container class=tio_vf_no_click> <p class=tio_vf_no_click>By clicking "Sign Up", you agree to Timeline\'s <a class=tio_vf_no_click href=https://app.timeline.io/terms-of-service target=_blank>Terms of Service</a> and <a href=https://app.timeline.io/privacy-policy target=_blank>Privacy Policy</a>.</p> </div> <div id=tio_vf_signup_modal_switch_forms_link_container class=tio_vf_no_click> <p class=tio_vf_no_click>Already have a Timeline account? <a id=tio_vf_signup_modal_switch_forms_link class=tio_vf_no_click>Log in.</a></p> </div> </form> <form id=tio_vf_login_modal_form accept-charset=UTF-8 class=tio_vf_no_click> <h1 id=tio_vf_login_modal_form_header class=tio_vf_no_click>Log in to your Timeline account.</h1> <label class=tio_vf_no_click for=tio_vf_login_email>Work Email</label> <input class=tio_vf_no_click type=email name=user[email] id=tio_vf_login_email required oninvalid=this.setCustomValidity( please provide your email address.&quot;)&quot; oninput=setCustomValidity( &quot;)&quot;> <label class=tio_vf_no_click for=tio_vf_login_password>Password</label> <input class=tio_vf_no_click type=password name=user[password] id=tio_vf_login_password required oninvalid=this.setCustomValidity( please provide your pasword.&quot;)&quot; oninput=setCustomValidity( &quot;)&quot; autocomplete=current-password> <input id=tio_vf_login_modal_form_submit_button class=tio_vf_no_click type=submit name=commit value="Log in" class="btn ot-btn ot-blue" data-disable-with="Log In"> <div id=tio_vf_login_modal_switch_forms_link_container class=tio_vf_no_click> <p class=tio_vf_no_click>Don\'t have an account? <a id=tio_vf_login_modal_switch_forms_link class=tio_vf_no_click>Get started for free.</a></p> </div> </form> </div> </div>',T=!1,I=!1,S=!1,R=!1,P="",z="",q=!1,L=0;function N(){e(".tio_vf_element_highlighter").each(function(t,o){var i=j(e(this).attr("id"));s[i]&&0!==s[i].length||(delete s[i],e(this).remove())})}function A(t){if(n){t.target.id!=o&&t.stopImmediatePropagation(),t.preventDefault(),t=t.target;var i=e(t);if(0===i.parents(".popover").length){if(i.hasClass("tio_vf_no_click"))(p=i).is("#"+o)||p.parents("#"+o).length?le():p.is("#tio_vf_current_signed_in_user_container")||p.parents("#tio_vf_current_signed_in_user_container").length?q||(R=!1,D()):p.parents("#tio_vf_signup_modal").length?((p.is("#tio_vf_signup_modal_close_button")||p.parents("#tio_vf_signup_modal_close_button").length)&&(R=!1,D()),p.is('label[for="tio_vf_email"')&&e("#tio_vf_email").focus(),p.is('label[for="tio_vf_name"')&&e("#tio_vf_name").focus(),p.is('label[for="tio_vf_password"')&&e("#tio_vf_password").focus(),p.is("#tio_vf_signup_modal_form_submit_button")&&e("#tio_vf_signup_modal_form").submit(),p.is("#tio_vf_signup_modal_switch_forms_link ")&&W(),p.is('label[for="tio_vf_login_email"')&&e("#tio_vf_login_email").focus(),p.is('label[for="tio_vf_login_password"')&&e("#tio_vf_login_password").focus(),p.is("#tio_vf_login_modal_form_submit_button")&&K(),p.is("#tio_vf_login_modal_switch_forms_link")&&W()):p.is("#tio_vf_b_toolbar_hide_action_container")||p.parents("#tio_vf_b_toolbar_hide_action_container").length?(e("#tio_vf_view_all_feedback").hide(),e("#tio_vf_current_signed_in_user_container").hide(),e("#tio_vf_b_toolbar_hide_action_container").hide(),e("#tio_vf_b_toolbar_show_action_container").show()):p.is("#tio_vf_b_toolbar_show_action_container")||p.parents("#tio_vf_b_toolbar_show_action_container").length?(e("#tio_vf_b_toolbar_show_action_container").hide(),e("#tio_vf_view_all_feedback").show(),e("#tio_vf_current_signed_in_user_container").show(),e("#tio_vf_b_toolbar_hide_action_container").show()):(p.is("#tio_vf_view_all_feedback")||p.parents("#tio_vf_view_all_feedback").length)&&("none"===e("#tio_vf_toolbar_all_comments_pane").css("display")?H().length>0?(O(),e("#tio_vf_toolbar_all_comments_pane").show(),e(".tio_vf_toolbar_v1").hasClass("tio_vf_b_toolbar_visible")&&e("#tio_vf_toolbar_all_comments_pane").css("width",e(".tio_vf_toolbar_v1").width())):(e("body").append('<div class="tio_vf_alert_info_v2"><i class="fa fa-info" aria-hidden="true"></i><span class="tio-vf-alert-content">There are no comments to show.</span></div>'),e(".tio_vf_alert_info_v2").fadeIn(),setTimeout(function(){e(".tio_vf_alert_info_v2").fadeOut()},3e3),setTimeout(function(){e(".tio_vf_alert_info_v2").remove()},3500)):e("#tio_vf_toolbar_all_comments_pane").hide());else if(i.parents("#tio_vf_toolbar_all_comments_pane").length){if(i.parents(".tio_vf_group_comment_header").length){var a=e(t.parentNode).data("regionLocator");e(".tio_vf_element_highlighter").popover("hide");var r=e(c="#hi-"+a);ne(a,s[a]).popover("show"),U(r)}}else if(!i.hasClass("tio_vf_element_highlighter")&&!i.hasClass("vf_commented_element_count")&&i.attr("id")!=o){e(".popover").length>0&&(e("[data-original-title]").popover("hide"),e("#comment-capture-in-progress-notice").remove());var l=(f=e(t),d=t.nodeName,v=ue(f),d+":P:"+ce(v));N();var _=_e(l);if(i.is(_)){if(!i.is("#tio_vf_cannot_comment_link")){var c=("#hi-"+l).replace(/:/g,"\\:");return(r=e(c)).length>0?U(r):(s[l]=s[l]||[],ne(l,[]).popover("show"),function t(){setTimeout(function(){if(e(".popover").is(":visible")){if(!e(".popover").is(":animated")){var o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i=e(".popover").height();e("html, body").animate({scrollTop:e(".popover").offset().top-o/2+i},450)}}else t()},50)}()),!1}window.open(i.attr("href"),"_blank")}else e("#tio_vf_toolbar_all_comments_pane").is(":visible")&&e("#tio_vf_toolbar_all_comments_pane").hide(),e("body").append('<div class="tio_vf_alert_info_v2"><i class="fa fa-info" aria-hidden="true"></i><span class="tio-vf-alert-content">You cannot comment on that. <a id="tio_vf_cannot_comment_link" href="https://help.timeline.io/troubleshooting/why-cant-i-comment-on-an-element" target="_blank" title="Learn why you cannot comment on this element.">Learn more.</a></span></div>'),e(".tio_vf_alert_info_v2").fadeIn(),setTimeout(function(){e(".tio_vf_alert_info_v2").fadeOut()},6e3),setTimeout(function(){e(".tio_vf_alert_info_v2").remove()},6500)}}else if(i.hasClass("new-message-button")){var u=j(i.attr("id"));re(e("#in-"+M(u)).html(),u)}else if(i.hasClass("cancel-message-button"))e("#comment-capture-in-progress-notice").remove(),e(".popover").remove(),m&&ie();else if(i.hasClass("autocomplete-user-selected")){te(e("#mentionable-users-list li.autocomplete-user-selected").attr("data-uid"),e("#mentionable-users-list li.autocomplete-user-selected").attr("data-un"))}}var f,d,v,p}function D(){T?(e("#tio_vf_signup_modal").removeClass("tio_vf_signup_modal_animation"),T=!1):(e("#tio_vf_signup_modal").addClass("tio_vf_signup_modal_animation"),T=!0)}function O(){for(var t=H(),o="",i=0;i<t.length;i++){var n='<div class="tio_vf_group_comment_header" data-region-locator="'+t[i].key+'"><div class="label-character">'+t[i].dom_reference_character+'</div><div class="label-text">Feedback on Region '+t[i].dom_reference_character+'</div></div><div class="tio_vf_comments_grouped_by_region">';t[i].value.forEach(function(e){n+=B(e)}),o+=n+="</div>"}e("#tio_vf_toolbar_all_comments_pane").html(o)}function H(){var e=[],t="dom_reference_character";for(var o in s)if(s.hasOwnProperty(o)&&0!=s[o].length){var i={};i[t]=s[o][0][t],i.key=o,i.value=s[o],e.push(i)}return e.sort(function(e){var t=1;"-"===e[0]&&(t=-1,e=e.substr(1));return function(o,i){return-1==t?i[e].localeCompare(o[e]):o[e].localeCompare(i[e])}}(t))}function U(t){setTimeout(function(){if(e(".popover").is(":visible")){if(!e(".popover").is(":animated")){Math.max(document.documentElement.clientHeight,window.innerHeight||0),e(".popover").height();e("html, body").animate({scrollTop:e(".popover").offset().top-60},450)}}else t.click(),U(t)},50)}function j(e){return e.substring(3)}function M(e){return e.replace(/:/g,"\\:")}function V(){e("body").addClass("timeline-vf-active"),e("body *").hover(function(o){if(n){e("."+t).removeClass(t),e(o.target).addClass(t);var i=e(o.target).offset();a.css("left",i.left).css("top",i.top-20).css("display","block")}},function(o){n&&(e(o.target).removeClass(t),a.css("display","none"))}),document.addEventListener("click",A,!0),e("body").on("focusin",".new-message-input",function(t){e(this).html()==i&&e(this).html("</br>")}),e("body").on("focusout",".new-message-input",function(t){var o=e(this).html().trim();""!=o&&"</br>"!=o&&"<br>"!=o||e(this).html(i)}),e("body").on("keydown",".new-message-input",function(e){13==e.keyCode&&(e.stopImmediatePropagation(),e.preventDefault()),!m||38!=e.keyCode&&40!=e.keyCode||(e.stopImmediatePropagation(),e.preventDefault()),k&&8==e.keyCode&&(e.stopImmediatePropagation(),e.preventDefault())}),e("body").on("change paste keyup",".new-message-input",function(t){var o,i,n,a;13==t.keyCode&&(t.stopImmediatePropagation(),t.preventDefault()),!m||38!=t.keyCode&&40!=t.keyCode||(t.stopImmediatePropagation(),t.preventDefault()),k&&8==t.keyCode&&(t.stopImmediatePropagation(),t.preventDefault()),h=e(".new-message-input").caret("pos"),o=document.getElementsByClassName("new-message-input")[0],i=window.getSelection().getRangeAt(0),n=i.cloneRange(),a=document.createElement("div"),n.selectNodeContents(o),n.setEnd(i.endContainer,i.endOffset),a.appendChild(n.cloneContents()),g=a.innerHTML.length,b=ee(e(".new-message-input").text(),h),w=function(e,t){var o=new RegExp(String.fromCharCode(160),"g");e=e.replace(o," ");var i=0,n=0,a=!1,s=0;for(;0==a;)" "!=e[t-s]&&null!=e[t-s]?i=t-s:a=!0,s+=1;a=!1,s=0;for(;0==a;)" "!=e[t+s]&&null!=e[t+s]?n=t+s+1:a=!0,s+=1;var r=e.substring(i,n);return i<n?r:""}(e(".new-message-input").text(),h);var s=ee(e(".new-message-input").html(),g);C=s.length>0&&"@"==s.replace("&nbsp;","").replace(/\s/g,"").substr(0,1),!m&&C&&(m=!0,p=!0,oe()),function(t){if(8==t.keyCode)if(m)v=b.substr(1,b.length),""!=b?Q(v):p?ie():""!=(v=w)?(oe(),Q(v)):ie();else{(function(e,t){var o,i=t,n=!1,a=1;for(;0==n;)" "!=!e[t-a]&&null!=e[t-a]?o=t-a:n=!0,a+=1;var s=e.substring(o,i)})(e(".new-message-input").html(),g);if(k&&!y){var o=b.replace(/\s/g,""),i=e(".new-message-input").html().substr(0,g),n=e(".new-message-input").html().substr(g);if(bowser.firefox)var a=new RegExp('(<a class="tio_vf_c_mention" data-uid=")+([0-9])+(" contenteditable="false">)+('+o+")+(</a>)+(&nbsp;)*$","g");else var a=new RegExp('(<a class="tio_vf_c_mention" contenteditable="false" data-uid=")+([0-9])+(">)+('+o+")+(</a>)+(&nbsp;)*$","g");e(".popover .popover-content .new-message-input").html(i.replace(a,o)+n),1,e(".new-message-input").caret("pos",h),p=!0,oe(),Q(v=b.substr(1,b.length))}}else if(13==t.which)if(t.ctrlKey)m?ie():document.execCommand("insertHTML",!1,"<br><br>");else if(m){var s=e("#mentionable-users-list li.autocomplete-user-selected").attr("data-uid"),r=e("#mentionable-users-list li.autocomplete-user-selected").attr("data-un");null!=s&&""!=s&&te(s,r)}else{var l=e(":focus");if(l.hasClass("new-message-input")){var _=l.html();if(_.length>0){var c=j(l.attr("id"));re(_,c)}}}else if(32==t.which)m&&ie();else if(37==t.which)C||ie();else if(38==t.which){if(m&&0!=e("#mentionable-users-list li.autocomplete-user-selected").prev().length){e("#mentionable-users-list li.autocomplete-user-selected").removeClass("autocomplete-user-selected").prev().addClass("autocomplete-user-selected");var u=e("#mentionable-users-list li.autocomplete-user-selected").offset().top-e("#mentionable-users-list").offset().top;u>137?e("#mentionable-users-list").scrollTop(u):u<0&&u>-25?e("#mentionable-users-list").scrollTop(0):u<0&&e("#mentionable-users-list").scrollTop(-1*u)}}else if(39==t.which)C||ie();else if(40==t.which){if(m&&0!=e("#mentionable-users-list li.autocomplete-user-selected").next().length){e("#mentionable-users-list li.autocomplete-user-selected").removeClass("autocomplete-user-selected").next().addClass("autocomplete-user-selected");var u=e("#mentionable-users-list li.autocomplete-user-selected").offset().top-e("#mentionable-users-list").offset().top;u>137?e("#mentionable-users-list").scrollTop(u):u<0&&u>-25?e("#mentionable-users-list").scrollTop(0):u<0&&e("#mentionable-users-list").scrollTop(-1*u)}}else 50==t.which&&t.shiftKey||"@"==t.key?m||oe():190!=t.which||t.shiftKey?null!=t.which&&16!=t.which&&37!=t.which&&39!=t.which&&46!=t.which&&m&&(/^[A-Za-z0-9]+$/.test(String.fromCharCode(t.keyCode+32))?(t.shiftKey?v+=String.fromCharCode(t.keyCode):"@"!=b&&(v+=String.fromCharCode(t.keyCode+32)),Q(v)):ie()):m&&ie();!function(){var t=e(".new-message-input").html().substr(0,g);y=!!new RegExp("^(.)*(&nbsp;)+$","g").test(t);if(bowser.firefox)var o=new RegExp('^(.)*(<a class="tio_vf_c_mention" data-uid=")+([0-9])+(" contenteditable="false">)+(@)+([A-Za-z0-9])+(</a>)+$',"g");else var o=new RegExp('^(.)*(<a class="tio_vf_c_mention" contenteditable="false" data-uid=")+([0-9])+(">)+(@)+([A-Za-z0-9])+(</a>)+$',"g");k=!!o.test(t)}()}(t)}),e(document).on({mouseenter:function(){e("#mentionable-users-list-container ul").children("li").each(function(t){e(this).removeClass("autocomplete-user-selected")}),e(this).is("#mentionable-users-list-container ul li")&&e(this).addClass("autocomplete-user-selected")}},"#mentionable-users-list-container ul li"),e("body").append('<div id="add_comment_label">Click to Leave Feedback...</div>'),e("body").append(x),setTimeout(function(){e("#tio_vf_b_toolbar").addClass("tio_vf_b_toolbar_visible")},300),e("body").append(E),document.getElementById(o).addEventListener("click",le),a=e("#add_comment_label"),e(window).resize(G),e(window).mousemove($),e("#tio_vf_signup_modal_form").on("submit",function(t){t.preventDefault(),function(){e("#tio_vf_signup_modal_form .tio_vf_form_error").remove(),e("#tio_vf_signup_modal_form *").filter(":input").each(function(){e(this).removeClass("invalid-entry")}),e("#tio_vf_signup_modal_form button[type=submit]").prop("disabled",!0);var t={name:e("#tio_vf_signup_name").val(),email:e("#tio_vf_signup_email").val(),pass:e("#tio_vf_signup_password").val(),event_id:c,event_reference_code:l},o=0;t.email.length>1?F(t.email)||(o+=1,e("#tio_vf_signup_email").addClass("invalid-entry"),e("#tio_vf_signup_email").before('<div class="tio_vf_form_error">Please provide a valid email.</div>')):(o+=1,e("#tio_vf_signup_email").addClass("invalid-entry"),e("#tio_vf_signup_email").before('<div class="tio_vf_form_error">Please provide your email.</div>'));t.name.length>1||(o+=1,e("#tio_vf_signup_name").addClass("invalid-entry"),e("#tio_vf_signup_name").before('<div class="tio_vf_form_error">Please provide your name.</div>'));t.pass.length>=6||(o+=1,e("#tio_vf_signup_password").addClass("invalid-entry"),e("#tio_vf_signup_password").before('<div class="tio_vf_form_error">Please provide a secure password at least 6 characters long.</div>'));0!=o||I?(e(".tio_vf_form_error").slideDown(),e("#tio_vf_signup_modal_form_submit_button").prop("disabled",!1)):(I=!0,e.ajax({type:"POST",url:"https://app.timeline.io/api/v1/users/sign_up_from_toolbar",data:t,success:function(t,o){me("ot_vf_uid",t.new_user.id,365),_=Number(t.new_user.id),me("ot_vf_uaat",t.new_user.api_token,365),r=t.new_user.api_token,e("body").append('<div class="tio_vf_alert_success_v2"><i class="fa fa-check" aria-hidden="true"></i><span class="tio-vf-alert-content">Successfully signed you up and automatically logged you in.</span></div>'),e(".tio_vf_alert_success_v2").fadeIn(),setTimeout(function(){e(".tio_vf_alert_success_v2").fadeOut()},3e3),setTimeout(function(){e(".tio_vf_alert_success_v2").remove()},3500),Y(t.new_user.name,t.new_user.avatar_url),D(),q=!0,R&&null!=P&&""!=P&&null!=z&&""!=z&&(re(P,z),R=!1,setTimeout(function(){P="",z=""},3e3)),setTimeout(function(){I=!1,e("#tio_vf_signup_modal_form_submit_button").prop("disabled",!1)},500)},error:function(t,o){409==t.status&&(e("body").append('<div class="tio_vf_alert_error_v2"><i class="fa fa-times" aria-hidden="true"></i><span class="tio-vf-alert-content">Unable to sign you up, a user already exists with that email.</span></div>'),e(".tio_vf_alert_error_v2").fadeIn(),setTimeout(function(){e(".tio_vf_alert_error_v2").fadeOut()},3e3),setTimeout(function(){e(".tio_vf_alert_error_v2").remove()},3500)),setTimeout(function(){I=!1,e("#tio_vf_signup_modal_form_submit_button").prop("disabled",!1)},500)}}))}()}),e("#tio_vf_login_modal_form").on("submit",function(e){e.preventDefault(),K()}),e(document).on("scroll",function(){f=!0}),e(document).on("scrollstop",function(){f=!1})}function $(t){if(n){var o=e(".popover");if(o.length>0){var i,a,s=o.offset(),r=o.width(),l=o.height();t.pageX<s.left&&(i=s.left-t.clientX);var _=(i=t.pageX>s.left+r?t.pageX-r-s.left:0)*i+(a=t.pageY<s.top?s.top-t.clientY:t.pageY>s.top+l?t.pageY-s.top-l:0)*a,c=e(window).height(),u=(e(window).width(),438*c);_<1e4?o.css("opacity",1):_>u&&!f?(e("#comment-capture-in-progress-notice").remove(),o.remove(),m&&ie()):o.css("opacity",1-Math.pow((_-1e4)/(u-1e4),2))}}}function G(){e("#comment-capture-in-progress-notice").remove(),e(".tio_vf_element_highlighter").popover("hide").each(function(t,o){var i=_e(j(e(this).attr("id")));if(i){var n=i.offset(),a=i.width(),s=i.height(),r=n.left,l=e("body"),_=l.width()-a-r,c=l.height()-s-n.top,u=Math.max(n.top,c,r,_);u==n.top?e(this).css("left",r+a/2).css("top",n.top):u==c?e(this).css("left",r+a/2).css("top",n.top+s):u==r?e(this).css("left",r).css("top",n.top+s/2):e(this).css("left",n.left+a).css("top",n.top+s/2)}}),ae()}function F(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function W(){e("#tio_vf_signup_modal_form").is(":visible")?(e("#tio_vf_signup_modal_form").hide(),e("#tio_vf_login_modal_form").show()):(e("#tio_vf_login_modal_form").hide(),e("#tio_vf_signup_modal_form").show())}function Y(t,o){e("#tio_vf_current_signed_in_user_container").replaceWith('<div id="tio_vf_current_signed_in_user_container" class="tio_vf_no_click" title="You  are currently signed in as '+t+'." data-toggle="tooltip" data-placement="top" data-animation="false" title="Profile picture of '+t+'"> <span class="tio_vf_no_click">Sign In</span> <img src="https://secure.gravatar.com/avatar/00000000000000000000000000000000?s=60&amp;d=mp&amp;r=PG" class="tio_vf_no_click"> </div>'),e("#tio_vf_current_signed_in_user_container img").replaceWith('<img src="'+o+'  " alt="Profile picture of '+t+'"  class="tio_vf_no_click"/>'),e("#tio_vf_current_signed_in_user_container span").text("Signed In").remove(),e('[data-toggle="tooltip"]').tooltip()}function K(){e("#tio_vf_login_modal_form .tio_vf_form_error").remove(),e("#tio_vf_login_modal_form *").filter(":input").each(function(){e(this).removeClass("invalid-entry")}),e("#tio_vf_login_modal_form button[type=submit]").prop("disabled",!0);var t={email:e("#tio_vf_login_email").val(),pass:e("#tio_vf_login_password").val(),event_id:c,event_reference_code:l},o=0;return t.email.length>1?F(t.email)||(o+=1,e("#tio_vf_login_email").addClass("invalid-entry"),e("#tio_vf_login_email").before('<div class="tio_vf_form_error">Please provide a valid email.</div>')):(o+=1,e("#tio_vf_login_email").addClass("invalid-entry"),e("#tio_vf_login_email").before('<div class="tio_vf_form_error">Please provide your email.</div>')),t.pass.length>=6||(o+=1,e("#tio_vf_login_password").addClass("invalid-entry"),e("#tio_vf_login_password").before('<div class="tio_vf_form_error">Please provide a secure password at least 6 characters long.</div>')),0!=o||S?(e(".tio_vf_form_error").slideDown(),e("#tio_vf_login_modal_form_submit_button").prop("disabled",!1)):(S=!0,e.ajax({type:"POST",url:"https://app.timeline.io/api/v1/users/log_in_from_toolbar",data:t,success:function(t,o){me("ot_vf_uid",t.user.id,365),_=Number(t.user.id),me("ot_vf_uaat",t.user.api_token,365),r=t.user.api_token,Y(t.user.name,t.user.avatar_url),D(),q=!0,R&&null!=P&&""!=P&&null!=z&&""!=z&&(re(P,z),R=!1,setTimeout(function(){P="",z=""},3e3)),e("body").append('<div class="tio_vf_alert_success_v2"><i class="fa fa-check" aria-hidden="true"></i><span class="tio-vf-alert-content">Successfully logged you in.</span></div>'),e(".tio_vf_alert_success_v2").fadeIn(),setTimeout(function(){e(".tio_vf_alert_success_v2").fadeOut()},3e3),setTimeout(function(){e(".tio_vf_alert_success_v2").remove()},3500),setTimeout(function(){S=!1,e("#tio_vf_login_modal_form_submit_button").prop("disabled",!1)},500)},error:function(t,o){403==t.status?(e("body").append('<div class="tio_vf_alert_error_v2"><i class="fa fa-times" aria-hidden="true"></i><span class="tio-vf-alert-content">Your email and/or password are incorrect, please try again.</span></div>'),e(".tio_vf_alert_error_v2").fadeIn(),setTimeout(function(){e(".tio_vf_alert_error_v2").fadeOut()},3e3),setTimeout(function(){e(".tio_vf_alert_error_v2").remove()},3500)):t.status,setTimeout(function(){S=!1,e("#tio_vf_login_modal_form_submit_button").prop("disabled",!1)},500)}})),!1}function X(){L>=0&&(1==L?e(".tio_vf_total_comment_count").text("1 Comment"):e(".tio_vf_total_comment_count").text(L+" Comments"))}function Z(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function B(t){var o,i,n,a,s,r,l,_,c,u;return a=t.created_at,r=new Date(a),l=r.getDate(),_=r.getMonth(),c=r.getFullYear(),u=r.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][_]+" "+((s=l)<=9?"0"+s:""+s)+", "+c+" "+u,t.author?(o=t.author.name,i=null==t.author.profile_image_url||""==t.author.profile_image_url?null==t.author.email||""==t.author.email?"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=identicon&r=PG":"https://www.gravatar.com/avatar/"+e.md5(t.author.email)+"?d=identicon&r=PG":t.author.profile_image_url):(o="Unnamed User",i="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=identicon&r=PG"),'<div class="media"><div class="media-left media-top"><img class="media-object feedback-author-avatar" src="'+i+'" alt="user avatar"></div><div class="media-body"><h4 class="media-heading"><span class="feeback-author-name">'+o+'</span><span class="pull-right feedback-submission-date">'+n+'</span></h4><p class="feedback-content">'+t.current_message_body+"</p></div></div>"}function J(){return window.location.href.split("#")[0]}function Q(t){e("#mentionable-users-list-container ul").html(""),d.length>0&&e(d).each(function(t){e("#mentionable-users-list").append('<li data-uid="'+d[t].id+'" data-un="'+d[t].username+'">'+d[t].username+"</li>")}),e("#mentionable-users-list-container ul").children("li").each(function(){e(this).attr("data-un").startsWith(t)?e(this).show():e(this).remove()});var o=0;e("#mentionable-users-list-container ul").children("li").each(function(){0==o&&e(this).addClass("autocomplete-user-selected"),o+=1}),e("#mentionable-users-list-container #selector-to-match").html(t)}function ee(e,t){var o=new RegExp(String.fromCharCode(160),"g");e=e.replace(o," ");for(var i,n=t,a=!1,s=1;0==a;)" "!=e[t-s]&&null!=e[t-s]?i=t-s:a=!0,s+=1;var r=e.substring(i,n);return i<n?r:""}function te(t,o){var i,n,a,s,r,l,_;(i="@"+v,n="@"+o,a=new RegExp('(?!(">))( )+('+i+")+$","g"),s=new RegExp('(?!(">))(&nbsp;)+('+i+")+$","g"),r=new RegExp("(^)+("+i+")+$","g"),l=e(".new-message-input").html().substr(0,g),_=e(".new-message-input").html().substr(g),null!=l.match(a)?e(".popover .popover-content .new-message-input").html(l.replace(a," "+n+_)):null!=l.match(s)?e(".popover .popover-content .new-message-input").html(l.replace(s,"&nbsp;"+n+_)):null!=l.match(r)&&e(".popover .popover-content .new-message-input").html(l.replace(r,""+n+_)),isNaN(t))?console.error("Invalid user ID, unable to save mention."):(!function(t,o){o=o.replace(" ","").replace("&nbsp;","");var i=new RegExp('(?!(">))( )+('+o+")+","g"),n=new RegExp('(?!(">))(&nbsp;)+('+o+")+","g"),a=new RegExp("(^)+("+o+")+","g"),s=e(".popover .popover-content .new-message-input").html();if(bowser.firefox)var r='<a class="tio_vf_c_mention" data-uid='+t+' contenteditable="false">'+o+"</a>&nbsp;";else var r='<a class="tio_vf_c_mention" contenteditable="false" data-uid='+t+">"+o+"</a>&nbsp;";if(null!=s.match(i)){var l=" "+r;e(".popover .popover-content .new-message-input").html(s.replace(i,l))}else if(null!=s.match(n)){var l="&nbsp;"+r;e(".popover .popover-content .new-message-input").html(s.replace(n,l))}else if(null!=s.match(a)){var l=r;e(".popover .popover-content .new-message-input").html(s.replace(a,l))}}(t,"@"+o),1,ie(),function(e){if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var o=window.getSelection();o.removeAllRanges(),o.addRange(t)}else if(void 0!==document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(e),i.collapse(!1),i.select()}}(document.getElementsByClassName("new-message-input")[0]))}function oe(){m=!0,e(".popover .popover-content .input-group").prepend('<div id="mentionable-users-list-container"><div id="mentionable-users-list-header">People in this project matching "<span id="selector-to-match"></span>":</div><ul id="mentionable-users-list"></ul></div>'),d.length>0?e(d).each(function(t){0==t?e("#mentionable-users-list").append('<li class="autocomplete-user-selected" data-uid="'+d[t].id+'" data-un="'+d[t].username+'">'+d[t].username+"</li>"):e("#mentionable-users-list").append('<li data-uid="'+d[t].id+'" data-un="'+d[t].username+'">'+d[t].username+"</li>")}):e("#mentionable-users-list").append('<li class="no-users" data-uid="-1">No users.</li>')}function ie(){e("#mentionable-users-list-container").remove(),m=!1,p=!1,v=""}function ne(t,o){var n=_e(t);if(n){var a=n.offset(),r=n.width(),l=(n.height(),e('<button class="tio_vf_element_highlighter" id="hi-'+t+'"></button>')),_='<div id="ig-'+t+'" class="input-group"><div contenteditable="true" class="new-message-input form-control input-sm autoExpand" id="in-'+t+'">'+i+'</div><button class="cancel-message-button btn btn-primary btn-sm" id="cancel_comment_button">Cancel</buton><button class="new-message-button btn btn-primary btn-sm" id="bt-'+t+'" id="new_comment_button">Comment</button></div>';return l.appendTo("body").css("left",a.left+r/2).css("top",a.top).popover({animation:!1,html:!0,content:function(){return s[t].map(B).join("")+_},title:'<span class="comments-box-title">Feedback</span> <div class="selected-element-type-container">for the element <span class="selected-element-type">'+n[0].nodeName+"</span></div>",placement:"auto",trigger:"click"}),0===o.length&&l.one("blur",function(){s[t]&&0===s[t].length&&(l.popover("destroy"),l.remove(),m&&ie(),e("#comment-capture-in-progress-notice").remove())}),l}console.error("Element with hash value "+t+" is not found")}function ae(){Object.keys(s).forEach(function(t){var o=_e(t);if(o){n?o.addClass("tio_vf_commented_element_border"):o.addClass("tio_vf_commented_element_border_disabled");var i=e("#topRightNum_"+M(t));i.length>0?i.html(se(t)):(i=e('<div class="vf_commented_element_count" id="topRightNum_'+t+'">'+se(t)+"</div>"),e("body").after(i));var a=o.offset(),s=o.outerWidth();o.outerHeight();i.css({left:a.left+s-15,top:a.top-15,position:"absolute"});var r=i.width()+i.offset().left,l=e(window).width()-r;l<0&&i.css({left:a.left+s-15-Math.abs(l)})}})}function se(e){if(void 0===s[e]||void 0===s[e][0])var t="undefined";else if(void 0===s[e][0].dom_reference_character)if(1==Object.keys(s).length){s[e][0].dom_reference_character="A";t="A"}else{t="undefined";var o=null;for(var i in s)if(s.hasOwnProperty(i)&&void 0!==s[i][0]&&void 0!==s[i][0].dom_reference_character){var n=s[i][0].dom_reference_character.charCodeAt();(null==o||n>o)&&(o=n)}if(void 0!==o&&null!=o){var a=String.fromCharCode(o+1);s[e][0].dom_reference_character=a,t=a}}else t=s[e][0].dom_reference_character;if(void 0===t){var r="ERR";o="A";for(var i in s){var l=s[i][0].dom_reference_character;void 0!==l?o=l.charCodeAt():r=String.fromCharCode(o+1)}return r}return t}function re(t,o){if((t=t.replace(/&nbsp;/g," ").replace(/\u00a0/g," ").trim())&&""!=t&&t!=i&&"<br>"!=t&&"<br></br>"!=t)if(q){var n=e("#bt-"+M(o)),a=e("#in-"+M(o));n.prop("disabled",!0),a.prop("disabled",!0),function(t,o,i){var n=_e(o),a=e(".new-message-input").offset(),l=e(".new-message-input").outerWidth(),f=(e(".new-message-input").outerHeight()-13)/2+"px",d=e(".new-message-input").outerHeight()-parseInt(f,10),m=!1;e(n[0]).hasClass("tio_vf_commented_element_border")&&(e(n[0]).removeClass("tio_vf_commented_element_border"),m=!0);var v=!1;e(n[0]).hasClass("tio_vf_hover_to_comment")&&(e(n[0]).removeClass("tio_vf_hover_to_comment"),v=!0);var p="";html2canvas(n[0],{useCORS:!0,async:!1}).then(function(h){if(o in s&&0!=s[o].length)p=null,e("body").append('<div id="comment-capture-in-progress-notice"><span class="loading-animation-component">Saving your comment...</span></div>'),e("#comment-capture-in-progress-notice").css({top:a.top,left:a.left,width:l,height:d,"padding-top":f}).show();else{e("body").append('<div id="comment-capture-in-progress-notice"><span class="loading-animation-component">Capturing screenshot of element...</span></div>'),e("#comment-capture-in-progress-notice").css({top:a.top,left:a.left,width:l,height:d,"padding-top":f}).show(),m&&e(n[0]).addClass("tio_vf_commented_element_border"),v&&e(n[0]).addClass("tio_vf_hover_to_comment");try{p=h.toDataURL("image/png")}catch(e){p=""}"img"==n[0].tagName.toLowerCase()?p=window.location.protocol.includes("file")?"image is unloadable":n[0].src:p.length>22?p.length>65534&&(p="non-image is too large"):p="non-image is invalid"}var g=n?n[0].outerHTML:"",b=!1;g.length>1e3&&(g=n[0].cloneNode(!1).outerHTML,b=!0);var w=0,k=0,y="unknown";screen.width&&(w=screen.width?screen.width:"",k=screen.height?screen.height:"",y=w+" x "+k);var C="unknown";document.documentElement.clientWidth&&(w=document.documentElement.clientWidth?document.documentElement.clientWidth:"",k=document.documentElement.clientHeight?document.documentElement.clientHeight:"",C=w+" x "+k);var x=bowser._detect(navigator.userAgent),E=s[o]&&s[o].length>0;if(p)var T={event_feedback:{current_message_body:t,event_id:c,user_id:_,url_of_current_page:J(),dom_reference:o,outer_html:E?null:g,outer_html_trimmed:b,timestamp:new Date,user_os:x.osname?x.osname:"unknown",user_os_version:x.osversion?x.osversion:"unknown",user_browser:x.name?x.name:"unknown",user_browser_version:x.version?x.version:"unknown",user_screen_size:y,user_browser_size:C},event_feedback_element_capture:{raw_image:p}};else var T={event_feedback:{current_message_body:t,event_id:c,user_id:_,url_of_current_page:J(),dom_reference:o,outer_html:E?null:g,outer_html_trimmed:b,timestamp:new Date,user_os:x.osname?x.osname:"unknown",user_os_version:x.osversion?x.osversion:"unknown",user_browser:x.name?x.name:"unknown",user_browser_version:x.version?x.version:"unknown",user_screen_size:y,user_browser_size:C}};var I=JSON.stringify(T);e.ajax({url:"https://app.timeline.io/api/v1/visual_feedback/",type:"POST",data:I,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("X-USER-TOKEN",r)},success:function(t){if(e("#comment-capture-in-progress-notice").remove(),t.timestamp=new Date(Date.parse(t.timestamp)),null==t.event_feedback_author_info.author_avatar||""==t.event_feedback_author_info.author_avatar)if(null==t.event_feedback_author_info.author_email||""==t.event_feedback_author_info.author_email)var n="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=identicon&r=PG";else var n="https://www.gravatar.com/avatar/"+e.md5(t.event_feedback_author_info.author_email)+"?d=identicon&r=PG";else var n=t.event_feedback_author_info.author_avatar;t.new_event_feedback_record.author={avatar:n,email:t.event_feedback_author_info.author_email,name:t.event_feedback_author_info.author_name},u.push(t.new_event_feedback_record),s[o]=s[o]||[],s[o].push(t.new_event_feedback_record),i(null,t.new_event_feedback_record)},error:function(t){i(t),e("#comment-capture-in-progress-notice").remove()}})})}(t,o,function(t,i){if(t)console.error(t);else{var s=e("#ig-"+M(o)),r=e("#hi-"+M(o)).data("bs.popover");null!=s&&e(s).is(":visible")&&(a.html(""),r.setContent(),r.$tip.addClass(r.options.placement)),ae(),L+=1,X(),e("#tio_vf_toolbar_all_comments_pane").is(":visible")&&O()}n.prop("disabled",!1),a.prop("disabled",!1)})}else R=!0,P=t,z=o,D()}function le(){toggleComments(!n)}function _e(t){var o=null,i=t.split(":");if(3!==i.length)return null;var n=i[0],a=i[1],s=parseInt(i[2]);return e("body "+n).each(function(){if("H"==a){if(ce(e(this).html())-s==0)return o=e(this),!1}else if("P"==a){if(ce(ue(e(this)))-s==0)return o=e(this),!1}else{if(ce(function(e){for(var t=e[0].attributes,o="",i=[],n=0;n<t.length;n++)i.push(t[n].nodeName+"-"+t[n].nodeValue.replace(/ tio_vf_hover_to_comment/g,"").replace(/ tio_vf_commented_element_border/g,"")+";");for(i.sort(),n=0;n<i.length;n++)o+=i[n];return o}(e(this)))-s==0)return o=e(this),!1}}),o}function ce(e){for(var t=0,o=0;o<e.length;o++)t=parseInt(e.charCodeAt(o))+(parseInt(t<<5)-parseInt(t));return t}function ue(t){for(var o=t.parents(),i=t.prevAll(),n="",a=o.length;0!=a;a--){var s=e(o[a-1]).prevAll();if(s.length>0)for(var r=s.length;0!=r;r--)n+=s[r-1].tagName.toLowerCase(),s[r-1].classList.length>0&&(n+="."+s[r-1].classList.value.replace(/\s/g,".")),n+="---";n+=o[a-1].tagName.toLowerCase(),o[a-1].classList.length>0&&(n+="."+o[a-1].classList.value.replace(/\s/g,".")),n+="/"}for(a=i.length;0!=a;a--)n+=i[a-1].tagName.toLowerCase(),i[a-1].classList.length>0&&(n+="."+i[a-1].classList.value.replace(/\s/g,".")),n+="---";return"---"===(n=n.replace(/\.timeline-vf-active/g,"").replace(/\.tio_vf_commented_element_border/g,"").replace(/\.tio_vf_hover_to_comment/g,"")).substr(-3)&&(n=n.substr(0,n.length-3)),n}function fe(e){var t=null,o=[];return location.search.substr(1).split("&").forEach(function(i){(o=i.split("="))[0]===e&&(t=decodeURIComponent(o[1]))}),t}function de(e){return"localhost"===location.hostname||"127.0.0.1"===location.hostname||""===location.hostname||location.href.includes("file://")?localStorage[e]:function(e){for(var t=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var n=o[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}(e)}function me(e,t,o){"localhost"===location.hostname||"127.0.0.1"===location.hostname||""===location.hostname||location.href.includes("file://")?localStorage[e]=t:function(e,t,o){var i="";if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3),i="; expires="+n.toUTCString()}document.cookie=e+"="+t+i+"; path=/"}(e,t,o)}function ve(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function pe(e,t,o,i,n,a){return ve((s=ve(ve(t,e),ve(i,a)))<<(r=n)|s>>>32-r,o);var s,r}function he(e,t,o,i,n,a,s){return pe(t&o|~t&i,e,t,n,a,s)}function ge(e,t,o,i,n,a,s){return pe(t&i|o&~i,e,t,n,a,s)}function be(e,t,o,i,n,a,s){return pe(t^o^i,e,t,n,a,s)}function we(e,t,o,i,n,a,s){return pe(o^(t|~i),e,t,n,a,s)}function ke(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var o,i,n,a,s,r=1732584193,l=-271733879,_=-1732584194,c=271733878;for(o=0;o<e.length;o+=16)i=r,n=l,a=_,s=c,l=we(l=we(l=we(l=we(l=be(l=be(l=be(l=be(l=ge(l=ge(l=ge(l=ge(l=he(l=he(l=he(l=he(l,_=he(_,c=he(c,r=he(r,l,_,c,e[o],7,-680876936),l,_,e[o+1],12,-389564586),r,l,e[o+2],17,606105819),c,r,e[o+3],22,-1044525330),_=he(_,c=he(c,r=he(r,l,_,c,e[o+4],7,-176418897),l,_,e[o+5],12,1200080426),r,l,e[o+6],17,-1473231341),c,r,e[o+7],22,-45705983),_=he(_,c=he(c,r=he(r,l,_,c,e[o+8],7,1770035416),l,_,e[o+9],12,-1958414417),r,l,e[o+10],17,-42063),c,r,e[o+11],22,-1990404162),_=he(_,c=he(c,r=he(r,l,_,c,e[o+12],7,1804603682),l,_,e[o+13],12,-40341101),r,l,e[o+14],17,-1502002290),c,r,e[o+15],22,1236535329),_=ge(_,c=ge(c,r=ge(r,l,_,c,e[o+1],5,-165796510),l,_,e[o+6],9,-1069501632),r,l,e[o+11],14,643717713),c,r,e[o],20,-373897302),_=ge(_,c=ge(c,r=ge(r,l,_,c,e[o+5],5,-701558691),l,_,e[o+10],9,38016083),r,l,e[o+15],14,-660478335),c,r,e[o+4],20,-405537848),_=ge(_,c=ge(c,r=ge(r,l,_,c,e[o+9],5,568446438),l,_,e[o+14],9,-1019803690),r,l,e[o+3],14,-187363961),c,r,e[o+8],20,1163531501),_=ge(_,c=ge(c,r=ge(r,l,_,c,e[o+13],5,-1444681467),l,_,e[o+2],9,-51403784),r,l,e[o+7],14,1735328473),c,r,e[o+12],20,-1926607734),_=be(_,c=be(c,r=be(r,l,_,c,e[o+5],4,-378558),l,_,e[o+8],11,-2022574463),r,l,e[o+11],16,1839030562),c,r,e[o+14],23,-35309556),_=be(_,c=be(c,r=be(r,l,_,c,e[o+1],4,-1530992060),l,_,e[o+4],11,1272893353),r,l,e[o+7],16,-155497632),c,r,e[o+10],23,-1094730640),_=be(_,c=be(c,r=be(r,l,_,c,e[o+13],4,681279174),l,_,e[o],11,-358537222),r,l,e[o+3],16,-722521979),c,r,e[o+6],23,76029189),_=be(_,c=be(c,r=be(r,l,_,c,e[o+9],4,-640364487),l,_,e[o+12],11,-421815835),r,l,e[o+15],16,530742520),c,r,e[o+2],23,-995338651),_=we(_,c=we(c,r=we(r,l,_,c,e[o],6,-198630844),l,_,e[o+7],10,1126891415),r,l,e[o+14],15,-1416354905),c,r,e[o+5],21,-57434055),_=we(_,c=we(c,r=we(r,l,_,c,e[o+12],6,1700485571),l,_,e[o+3],10,-1894986606),r,l,e[o+10],15,-1051523),c,r,e[o+1],21,-2054922799),_=we(_,c=we(c,r=we(r,l,_,c,e[o+8],6,1873313359),l,_,e[o+15],10,-30611744),r,l,e[o+6],15,-1560198380),c,r,e[o+13],21,1309151649),_=we(_,c=we(c,r=we(r,l,_,c,e[o+4],6,-145523070),l,_,e[o+11],10,-1120210379),r,l,e[o+2],15,718787259),c,r,e[o+9],21,-343485551),r=ve(r,i),l=ve(l,n),_=ve(_,a),c=ve(c,s);return[r,l,_,c]}function ye(e){var t,o="";for(t=0;t<32*e.length;t+=8)o+=String.fromCharCode(e[t>>5]>>>t%32&255);return o}function Ce(e){var t,o=[];for(o[(e.length>>2)-1]=void 0,t=0;t<o.length;t+=1)o[t]=0;for(t=0;t<8*e.length;t+=8)o[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return o}function xe(e){var t,o,i="0123456789abcdef",n="";for(o=0;o<e.length;o+=1)t=e.charCodeAt(o),n+=i.charAt(t>>>4&15)+i.charAt(15&t);return n}function Ee(e){return unescape(encodeURIComponent(e))}function Te(e){return ye(ke(Ce(t=Ee(e)),8*t.length));var t}function Ie(e,t){return function(e,t){var o,i,n=Ce(e),a=[],s=[];for(a[15]=s[15]=void 0,n.length>16&&(n=ke(n,8*e.length)),o=0;o<16;o+=1)a[o]=909522486^n[o],s[o]=1549556828^n[o];return i=ke(a.concat(Ce(t)),512+8*t.length),ye(ke(s.concat(i),640))}(Ee(e),Ee(t))}window.toggleComments=function(i){i?(n=!0,e("body").addClass("timeline-vf-active"),e(".vf_commented_element_count").show(),e("#"+o).html('\x3c!--[if lte IE 8]><img src="https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_enabled.png" class="tio_vf_no_click" /><![endif]--\x3e \x3c!--[if gt IE 8]><img src="https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_enabled.svg" class="tio_vf_no_click" /><![endif]--\x3e \x3c!--[if !IE]> --\x3e<img src="https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_enabled.svg" class="tio_vf_no_click" />\x3c!-- <![endif]--\x3e <span class="tio_vf_no_click">Feedback On</span>'),e(".tio_vf_commented_element_border_disabled").removeClass("tio_vf_commented_element_border_disabled").addClass("tio_vf_commented_element_border")):(e("#"+o).html('\x3c!--[if lte IE 8]><img src="https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_disabled.png" class="tio_vf_no_click" /><![endif]--\x3e \x3c!--[if gt IE 8]><img src="https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_disabled.svg" class="tio_vf_no_click" /><![endif]--\x3e \x3c!--[if !IE]> --\x3e<img src="https://s3-us-west-2.amazonaws.com/o-t/vf/assets/tio_vf_disabled.svg" class="tio_vf_no_click" />\x3c!-- <![endif]--\x3e <span class="tio_vf_no_click">Feedback Off</span>'),e(".tio_vf_element_highlighter").popover("hide"),e(".tio_vf_commented_element_border").removeClass("tio_vf_commented_element_border").addClass("tio_vf_commented_element_border_disabled"),N(),n=!1,e("body").removeClass("timeline-vf-active"),e("."+t).removeClass(t),e(".vf-commented-element-border").removeClass(t),e(".vf_commented_element_count").hide())},e(document).ready(function(){var t,o,i,n,a,u;o="",null!=(t=fe("ot_vf_uid"))&&""!=t?(me("ot_vf_uid",t,365),_=t):null!=(o=de("ot_vf_uid"))&&""!=o&&(_=Number(o)),n="",null!=(i=fe("ot_vf_uaat"))&&""!=i?(me("ot_vf_uaat",i,365),r=i):null!=(n=de("ot_vf_uaat"))&&""!=n&&(r=n),e.ajax({url:"https://app.timeline.io/api/v1/users/toolbar/user",type:"GET",data:{tio_vf_uid:_},contentType:"application/json",beforeSend:function(e){e.setRequestHeader("X-USER-TOKEN",r)},success:function(e){q=!0,Y(e.vf_toolbar_user.name,e.vf_toolbar_user.profile_image_url)},error:function(e){q=!1}}),c=window.teidvf,l=window.tio_vf_eat,V(),a=location.protocol+"//"+location.host+location.pathname,u=function(t,o){t?console.error(t):(o.forEach(function(e){s[e.dom_reference]=s[e.dom_reference]||[],s[e.dom_reference].push(e),L+=1}),Object.keys(s).forEach(function(e){ne(e,s[e])}),ae(),function(){if("true"==Z("scroll_to_elem")){var t=Z("dom_ref");if(t){var o=_e(t);if(o){var i=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=e(o[0]).height();e("html, body").animate({scrollTop:e(o[0]).offset().top-i/2+n},600),setTimeout(function(){ne(t,s[t]).popover("show")},300)}}}}(),X())},e.ajax({url:"https://app.timeline.io/api/v1/event/visual_feedback/web_v3",data:{url:a,event_id:c,event_reference_code:l},success:function(e){if(500!=e.status){var t=e.event_feedback_records;t.forEach(function(e){e.timestamp=new Date(Date.parse(e.timestamp))}),u(null,t)}},error:function(e){e.status,u(e)}}),e.ajax({url:"https://app.timeline.io/api/v1/events/all_users_list_v2",type:"GET",data:{event_id:c,event_reference_code:l},type:"GET",success:function(e,t){d=204==e.status?[]:e.users},error:function(e){e.status}})}),e.md5=function(e,t,o){return t?o?Ie(t,e):xe(Ie(t,e)):o?Te(e):xe(Te(e))}}(jQuery);